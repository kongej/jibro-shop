<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/default_layout}">
<head>
<meta charset="UTF-8">
<head>
<title>주문 상세</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	<!--/* css */-->
	<link th:href="@{/css/common.css}" rel="stylesheet" />
</head>
<body>
  <div class="full-container">
		<th:block layout:fragment="header" th:include="@{/fragments/header}"></th:block>
		<div layout:fragment="content" class="row justify-content-center content my-3">
			<div class="logo_div mt-4 mb-3">
				<img alt="1.png" src="/imgs/logo/big_logo.png" class="mb-2">
			</div>
			<div class="container row justify-content-center align-items-center my-5">
				<div class="col-md-auto">
					<div class="card" style="width: 600px;" >
					    <div class="card-body m-4">
					    	<h3>주문 상세정보</h3>
					    	<hr>
							<div class="my-4">
								<h5>주문번호</h5>
								<div class="text-end mx-3">
									<b th:text="${orderResponseDto.orderId}"></b>
								</div>
							</div>
							<div class="my-4">
								<h5>선택 수량</h5>
								<div class="text-end mx-3">
									<b th:text="${orderResponseDto.selectedCount}"></b> <b>개</b>
								</div>
							</div>
							<div class="my-4">
								<h5>총 가격</h5>
								<div class="text-end mx-3">
									<b th:text="${orderResponseDto.totalCost}"></b> <b>원</b>
								</div>
							</div>
							<div class="my-4">
								<h5>구매자명</h5>
								<div class="text-end mx-3">
									<b th:text="${orderResponseDto.ordererName}"></b> <b>님</b>
								</div>
							</div>
							<div class="my-4">
								<h5>연락처</h5>
								<div class="text-end mx-3">
									<b id="formattedPhone" th:text="${orderResponseDto.phoneNumber}" ></b>
								</div>
							</div>
							<div class="my-4">
								<h5>주소</h5>
								<div class="text-end mx-3">
									<b th:text="${orderResponseDto.address}"></b>
								</div>
							</div>
							<div class="my-4">
								<h5>현 상태</h5>
								<div th:switch="${orderResponseDto.status}" class="text-end mx-3">
									<div th:case="0">
										<b>주문완료</b> 
									</div>
									<div th:case="1">
										<b>상품준비중 (</b> <b th:text="${orderResponseDto.invc}"></b> <b>)</b> 
									</div>
									<div th:case="2">
										<b>배송준비중 (</b> <a href="https://www.cjlogistics.com//ko/tool/parcel/tracking" th:text="${orderResponseDto.invc}"></a> <b>)</b> 
									</div>
									<div th:case="*">
										<b></b> 
									</div>
								</div>
							</div>
							<div class="mt-4 mb-5">
								<h5>주문날짜</h5>
								<div class="text-end mx-3">
									<b th:text="${#temporals.format(orderResponseDto.createdAt, 'yyyy-MM-dd')}"></b>
								</div>
							</div>
							<div class="button_div my-4">
								<button id="submit_btn" type="submit"  th:onclick="|location.href='@{/product/{productId}(productId=${orderResponseDto.productId})}'|" class="btn">
								<span class="material-symbols-outlined">
									inventory_2
								</span>&nbsp;상품보기</button>
							</div>	
				       	</div>
				  	</div>
				</div>
		    </div>
	    </div>
	    <th:block layout:fragment="footer" th:include="@{/fragments/footer}"></th:block>
    </div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script type="text/javascript">
	document.addEventListener('DOMContentLoaded', function() {
            const phoneElement = document.getElementById('formattedPhone');
            const phoneNumber = phoneElement.textContent.trim(); // 타임리프를 통해 설정된 값을 가져옴
            const formattedPhoneNumber = formatPhoneNumber(phoneNumber);
            phoneElement.textContent = formattedPhoneNumber; // 포맷된 번호를 다시 설정
        });

        function formatPhoneNumber(number) {
            if (number.length === 11) {
                return number.replace(/(\d{3})(\d{4})(\d{4})/, '$1-$2-$3');
            }
            return number; // 길이가 11이 아닌 경우 원래 문자열을 반환
        }
</script>
</html>