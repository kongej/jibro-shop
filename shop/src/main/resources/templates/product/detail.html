<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
<head>
<title>제품 정보</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<meta charset="UTF-8">
<!--/* css */-->
<link th:href="@{/css/common.css}" rel="stylesheet" />
</head>
<body>
	<div class="full-container">
		<th:block layout:fragment="header" th:include="@{/fragments/header}"></th:block>
		<div layout:fragment="content" class="row justify-content-center content my-3">
			<div class="logo_div mt-4 mb-3">
				<img alt="1.png" src="/imgs/logo/big_logo.png" class="mb-2">
			</div>
			<div class="container row justify-content-center align-items-center my-5">
				<div class="col-md-auto mx-3">
					<div id="carouselExampleRide" class="carousel slide" data-bs-ride="true" width="600px">
					<div class="carousel-indicators">
					    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
					    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
					    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
					  </div>
					  <div class="carousel-inner">
					    <div class="carousel-item active">
					      <img alt="1.png" src="/imgs/product/1.jpg" id="product_img" class="product_img carousel-image d-block mx-auto" width="600px">
					    </div>
					    <div class="carousel-item">
					      <img alt="2.png" src="/imgs/product/2.jpg" id="product_img" class="product_img carousel-image d-block mx-auto" width="600px">
					    </div>
					    <div class="carousel-item">
					      <img alt="3.png" src="/imgs/product/3.jpg" id="product_img" class="product_imgcarousel-image d-block mx-auto" width="600px">
					    </div>
					  </div>
					  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleRide" data-bs-slide="prev">
					    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					    <span class="visually-hidden">Previous</span>
					  </button>
					  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleRide" data-bs-slide="next">
					    <span class="carousel-control-next-icon" aria-hidden="true"></span>
					    <span class="visually-hidden">Next</span>
					  </button>
					</div>
		    		<!-- <img alt="1.png" src="/imgs/product/1.jpg" id="product_img" class="product_img" width="600px"> -->
		   		</div>
				<div class="col-md-auto">
					<div class="card">
					    <div class="card-body m-4">
							<h2 th:text="${productResponseDto.product}"></h2>
							<hr>
							<div class="my-4">
								<h4>가격</h4> 
								<div class="text-end mx-3">
									<b id="productCountElement" th:text="${productResponseDto.cost}"></b> <b>원</b>
								</div>
							</div>
							<div class="my-4">
								<h4>남은 수량</h4> 
								<div class="text-end mx-3">
									<b th:text="${productResponseDto.productCount}"></b> <b>개</b>
								</div>
							</div>
<!-- 							<div class="my-4">
								<h4>남은 개수</h4>
								<div class="text-end mx-3">
									<b id="productCountElement" th:text="${productResponseDto.}"></b> <b>원</b>
								</div>
							</div> -->
							<form method="POST" th:action="@{/order/make}" th:object="${orderMakeDto}">
								<input type="hidden" name="productId" th:value="${productResponseDto.productId}" />
								<h4>상품 개수</h4>
								<input id="selectedCount" type="number" name="selectedCount" value="1" min="1" th:max="${productResponseDto.productCount}" class="form-control" required />
								<div class="my-4">
									<h4>총 가격</h4> 
									<div class="row justify-content-end align-items-center mx-3">
										<h3 id="totalPrice" class="col-md-auto" th:text="${productResponseDto.cost}" style="color:red;"></h3>
									</div>
								</div>
								<div class="button_div my-4">
									<button id="submit_btn" type="submit" class="btn"><span class="material-symbols-outlined">
										shopping_cart_checkout
									</span>&nbsp;주문</button>
								</div>
							</form>
				       	</div>
				  	</div>
				</div>
		    </div>
		    <div>
		    	<ul class="nav nav-tabs justify-content-center mt-2">
				  <li class="nav-item active mx-5">
				    <a class="nav-link active" aria-current="page" href="#"><h4 class="mx-4 my-3">상세정보</h3></a>
				  </li>
				  <li class="nav-item mx-5">
				    <a class="nav-link" aria-current="page" href="#"><h5 class="mx-4 my-3">리뷰</h3></a>
				  </li>
				  <li class="nav-item mx-5">
				    <a class="nav-link" aria-current="page" href="#"><h5 class="mx-4 my-3">Q&A</h3></a>
				  </li>
				  <li class="nav-item mx-5">
				    <a class="nav-link" aria-current="page" href="#"><h5 class="mx-4 my-3">반품/교환정보</h3></a>
				  </li>
				</ul>
		    </div>
		    <div class="logo_div mt-2">
		    	<img alt="detail1.png" src="/imgs/product/product_detail1.png" class="mb-2" width="1000px">
		    </div>
		    <div class="logo_div mb-5">
		    	<img alt="detail2.png" src="/imgs/product/product_detail2.png" class="mb-2" width="1000px">
		    </div>
	    </div>
	    <th:block layout:fragment="footer" th:include="@{/fragments/footer}"></th:block>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
	<script th:inline="javascript">
		document.addEventListener("DOMContentLoaded", function() {
	            var selectedCount = document.getElementById("selectedCount");
	            var totalPrice = document.getElementById("totalPrice");
	            var productCost = [[${productResponseDto.cost}]]; // 타임리프에서 변수 바인딩
	
	            function updateTotalPrice() {
	                var count = selectedCount.value;
	                var total = count * productCost;
	                totalPrice.textContent = total + " 원";
	            }
				
	            // 초기 총 가격 설정
	            updateTotalPrice();
	
	            // 입력 값 변경 시 총 가격 업데이트
	            selectedCount.addEventListener("input", updateTotalPrice);
	            
	        });
	</script>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</html>