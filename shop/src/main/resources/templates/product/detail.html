<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">
<head>
<title>제품 정보</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<meta charset="UTF-8">
<!--/* css */-->
<link th:href="@{/css/common.css}" rel="stylesheet" />
</head>
<body>
	<div class="full-container">
		<th:block layout:fragment="header" th:include="@{/fragments/header}"></th:block>
		<div layout:fragment="content" class="row justify-content-center content my-3">
			<div class="logo_div mt-4 mb-3">
				<img alt="1.png" src="/imgs/logo/big_logo.png" class="mb-2">
			</div>
			<div class="container row justify-content-center align-ite
			ms-center my-5">
				<div class="col-md-auto mx-3">
		    		<img alt="1.png" src="/imgs/product/1.jpg" id="product_img" class="product_img" width="600px">
		   		</div>
				<div class="col-md-auto">
					<div class="card">
					    <div class="card-body m-4">
							<h2 th:text="${productResponseDto.product}"></h2>
							<hr>
							<div class="my-4">
								<h4>가격</h4> 
								<div class="text-end mx-3">
									<b id="productCountElement" th:text="${productResponseDto.cost}"></b> <b>원</b>
								</div>
							</div>
							<div class="my-4">
								<h4>남은 수량</h4> 
								<div class="text-end mx-3">
									<b th:text="${productResponseDto.productCount}"></b> <b>개</b>
								</div>
							</div>
<!-- 							<div class="my-4">
								<h4>남은 개수</h4>
								<div class="text-end mx-3">
									<b id="productCountElement" th:text="${productResponseDto.}"></b> <b>원</b>
								</div>
							</div> -->
							<form method="POST" th:action="@{/order/make}" th:object="${orderMakeDto}">
								<input type="hidden" name="productId" th:value="${productResponseDto.productId}" />
								<h4>상품 개수</h4>
								<input id="selectedCount" type="number" name="selectedCount" value="1" min="1" class="form-control" required />
								<div class="my-4">
									<h4>총 가격</h4> 
									<div class="row justify-content-end align-items-center mx-3">
										<h3 id="totalPrice" class="col-md-auto" th:text="${productResponseDto.cost}" style="color:red;"> 원</h3>
									</div>
								</div>
								<div class="button_div my-4">
									<button id="submit_btn" type="submit" class="btn"><span class="material-symbols-outlined">
										shopping_cart_checkout
									</span>   주문</button>
								</div>
							</form>
				       	</div>
				  	</div>
				</div>
		    </div>
		    <div class="logo_div mt-2 mb-5">
		    	<img alt="1.png" src="/imgs/product/product1_detail.png" class="mb-2" width="1000px">
		    </div>
	    </div>
	    <th:block layout:fragment="footer" th:include="@{/fragments/footer}"></th:block>
    </div>
	<script th:inline="javascript">
		document.addEventListener("DOMContentLoaded", function() {
	            var selectedCount = document.getElementById("selectedCount");
	            var totalPrice = document.getElementById("totalPrice");
	            var productCost = [[${productResponseDto.cost}]]; // 타임리프에서 변수 바인딩
	
	            function updateTotalPrice() {
	                var count = selectedCount.value;
	                var total = count * productCost;
	                totalPrice.textContent = total + " 원";
	            }
	
	            // 초기 총 가격 설정
	            updateTotalPrice();
	
	            // 입력 값 변경 시 총 가격 업데이트
	            selectedCount.addEventListener("input", updateTotalPrice);
	        });
	</script>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

</html>